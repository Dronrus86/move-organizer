(this["webpackJsonpbootcamp-m4-starter"]=this["webpackJsonpbootcamp-m4-starter"]||[]).push([[0],{23:function(e,t,a){e.exports=a(42)},28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(20),c=a.n(i),o=a(15),s=a(3),l=a(4),m=a(6),u=a(5),v=a(1),h=(a(28),a(29),function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("header",{className:"header"},r.a.createElement("h1",{className:"header__title"},"MustSee"))}}]),a}(n.Component)),p=a(22),f=a(13),b=a(11),d={movies:[],favouriteMovies:[]};var E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_MOVIES":return Object(b.a)(Object(b.a)({},e),{},{movies:Object(f.a)(t.payload.movieList)});case"ADD_MOVIES":var a=t.payload.myFavouriteMovies,n=e.favouriteMovies.find((function(e){return e.imdbID===a.imdbID}));if(!n){var r=[].concat(Object(f.a)(e.favouriteMovies),[a]);return Object(b.a)(Object(b.a)({},e),{},{favouriteMovies:r})}return e;case"DELETE_MOVIES":var i=Object(f.a)(e.favouriteMovies.filter((function(e){return e.imdbID!==t.payload.imdbID})));return Object(b.a)(Object(b.a)({},e),{},{favouriteMovies:i});default:return e}},y=Object(p.a)(E),O=(a(30),function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={searchLine:""},e.searchLineChangeHandler=function(t){e.setState({searchLine:t.target.value})},e.searchBoxSubmitHandler=function(t){t.preventDefault(),fetch("http://www.omdbapi.com/?s=".concat(e.state.searchLine,"&apikey=103381a1")).then((function(e){return e.json()})).then((function(e){if(e.Search){var t=e.Search;y.dispatch({type:"SHOW_MOVIES",payload:{movieList:t}})}else alert("RESULT: No movies found on request")})).catch((function(e){return console.log(e)}))},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state.searchLine;return r.a.createElement("div",{className:"search-box"},r.a.createElement("form",{className:"search-box__form",onSubmit:this.searchBoxSubmitHandler},r.a.createElement("label",{className:"search-box__form-label"},"\u0418\u0441\u043a\u0430\u0442\u044c \u0444\u0438\u043b\u044c\u043c \u043f\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044e:",r.a.createElement("input",{value:e,type:"text",className:"search-box__form-input",placeholder:"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, Shawshank Redemption",onChange:this.searchLineChangeHandler})),r.a.createElement("button",{type:"submit",className:"search-box__form-submit",disabled:!e},"\u0418\u0441\u043a\u0430\u0442\u044c")))}}]),a}(n.Component)),_=(a(31),function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={movies:e.props},e.addToFavorites=function(){y.dispatch({type:"ADD_MOVIES",payload:{myFavouriteMovies:e.props}})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.Title,a=e.Year,n=e.Poster;return r.a.createElement("article",{className:"movie-item"},r.a.createElement("img",{className:"movie-item__poster",src:n,alt:t}),r.a.createElement("div",{className:"movie-item__info"},r.a.createElement("h3",{className:"movie-item__title"},t,"\xa0(",a,")"),r.a.createElement("button",{onClick:this.addToFavorites,type:"button",className:"movie-item__add-button"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0441\u043f\u0438\u0441\u043e\u043a")))}}]),a}(n.Component)),j=(a(32),function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={movies:[]},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;y.subscribe((function(){var t=y.getState();e.setState({movies:t.movies})}))}},{key:"render",value:function(){return r.a.createElement("ul",{className:"movies"},this.state.movies.map((function(e){return r.a.createElement("li",{className:"movies__item",key:e.imdbID},r.a.createElement(_,e))})))}}]),a}(n.Component)),g=(a(33),function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={searchLine:"",movies:[],listId:"",disabledInput:!1,showButton:"block",showLink:"none"},e.deleteFromFavorites=function(e){y.dispatch({type:"DELETE_MOVIES",payload:{imdbID:e}})},e.searchLineChangeHandler=function(t){e.setState({searchLine:t.target.value})},e.favoritesSubmitHandler=function(t){t.preventDefault();var a={title:e.state.searchLine,movies:e.state.movies.map((function(e){return e.imdbID}))};fetch("https://acb-api.algoritmika.org/api/movies/list",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(t){e.setState({listId:"http://localhost:3000/list/".concat(t.id),disabledInput:!0,showButton:"none",showLink:"inline-block"})})).catch((function(e){return console.log(e)}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;y.subscribe((function(){var t=y.getState();e.setState({movies:t.favouriteMovies})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.searchLine,n=t.listId,i=t.disabledInput,c=t.showButton,o=t.showLink;return r.a.createElement("div",{className:"favorites"},r.a.createElement("form",{className:"favorites__form",onSubmit:this.favoritesSubmitHandler},r.a.createElement("input",{value:a,type:"text",className:"favorites__name",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0444\u0438\u043b\u044c\u043c\u0430",onChange:this.searchLineChangeHandler,disabled:i}),r.a.createElement("ul",{className:"favorites__list"},this.state.movies.map((function(t){return r.a.createElement("li",{key:t.imdbID},t.Title," (",t.Year,")",r.a.createElement("span",null,r.a.createElement("button",{key:t.imdbID,type:"button",className:"favorites__delete",onClick:function(){return e.deleteFromFavorites(t.imdbID)},disabled:i},"\u2718")))}))),r.a.createElement("button",{type:"submit",className:"favorites__save",disabled:!a,style:{display:c}},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a"),r.a.createElement("a",{style:{display:o},className:"favoritesLink",href:n},"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u0441\u043f\u0438\u0441\u043a\u0443")))}}]),a}(n.Component)),N=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"main-page"},r.a.createElement(h,null),r.a.createElement("main",{className:"main-page__content"},r.a.createElement("section",{className:"main-page__main-section"},r.a.createElement("div",{className:"main-page__search-box"},r.a.createElement(O,null)),r.a.createElement("div",{className:"main-page__movies"},r.a.createElement(j,null))),r.a.createElement("aside",{className:"main-page__favorites"},r.a.createElement(g,null))))}}]),a}(n.Component),k=(a(34),function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={movies:[]},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;fetch("https://acb-api.algoritmika.org/api/movies/list/".concat(t)).then((function(e){return e.json()})).then((function(t){e.setState({title:t.title});var a=[];t.movies.forEach((function(t){fetch("http://www.omdbapi.com/?i=".concat(t,"&apikey=640ec5e5")).then((function(e){return e.json()})).then((function(t){a.push(t),e.setState({movies:a})}))}))})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this.state.title;return r.a.createElement("div",{className:"list-page"},r.a.createElement("h1",{className:"list-page__title"},e),r.a.createElement("ul",{className:"list__favorites"},this.state.movies.map((function(e){return r.a.createElement("li",{key:e.imdbID},r.a.createElement("a",{href:"https://www.imdb.com/title/"+e.imdbID,target:"_blank",rel:"noopener noreferrer"},e.Title," (",e.Year,")"))}))))}}]),a}(n.Component)),S=(a(35),a(36),function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement(v.a,{path:"/",exact:!0,component:N}),r.a.createElement(v.a,{path:"/list/:id",exact:!0,component:k}))}}]),a}(r.a.Component));c.a.render(r.a.createElement(o.a,null,r.a.createElement(S,null)),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.ba013e05.chunk.js.map